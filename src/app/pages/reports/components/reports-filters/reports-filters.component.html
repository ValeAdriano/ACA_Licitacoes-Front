<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-5">
  <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
    
    <!-- Período -->
    <div class="flex flex-col sm:flex-row gap-4">
      <div class="flex flex-col">
        <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Período</label>
        <select 
          [(ngModel)]="selectedPeriod" 
          (change)="onPeriodChange(selectedPeriod)"
          class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500">
          <option *ngFor="let option of periodOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>

      <!-- Custom date range -->
      <div *ngIf="selectedPeriod === 'custom'" class="flex flex-col sm:flex-row gap-2">
        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">De</label>
          <input
            type="date"
            [(ngModel)]="customDateRange.start"
            (change)="onCustomDateChange()"
            class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500">
        </div>
        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Até</label>
          <input
            type="date"
            [(ngModel)]="customDateRange.end"
            (change)="onCustomDateChange()"
            class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500">
        </div>
      </div>
    </div>

    <!-- UF -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">UF</label>
      <div class="flex flex-wrap gap-2">
        <button
          *ngFor="let uf of ufOptions"
          (click)="onUfToggle(uf.value)"
          [class]="isUfSelected(uf.value) 
            ? 'px-3 py-1 text-sm bg-green-100 text-green-800 border border-green-300 rounded-full hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700'
            : 'px-3 py-1 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-full hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600'">
          {{ uf.label }}
        </button>
      </div>
    </div>

    <!-- Modalidade -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Modalidade</label>
      <select 
        #modalidadeSelect
        (change)="onModalidadeChange(modalidadeSelect.value)"
        class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500">
        <option value="">Todas</option>
        <option *ngFor="let option of modalidadeOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
    </div>

    <!-- Status -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Status</label>
      <div class="flex flex-wrap gap-2">
        <button
          *ngFor="let status of statusOptions"
          (click)="onStatusToggle(status.value)"
          [class]="isStatusSelected(status.value) 
            ? 'px-3 py-1 text-sm bg-green-100 text-green-800 border border-green-300 rounded-full hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700'
            : 'px-3 py-1 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-full hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600'">
          {{ status.label }}
        </button>
      </div>
    </div>

    <!-- Órgão -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Órgão</label>
      <input
        type="text"
        (input)="onOrgaoChange($event.target.value)"
        placeholder="Digite o órgão..."
        class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500 w-full sm:w-48">
    </div>

    <!-- Actions -->
    <div class="flex items-end gap-2">
      <button
        (click)="onApplyFilters()"
        class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors">
        Aplicar
      </button>
      <button
        (click)="onClearFilters()"
        class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
        Limpar
      </button>
    </div>
  </div>

  <!-- Active filters chips -->
  <div *ngIf="getActiveFiltersCount() > 0" class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
    <div class="flex items-center gap-2">
      <span class="text-sm text-gray-600 dark:text-gray-400">Filtros ativos:</span>
      <div class="flex flex-wrap gap-2">
        <span *ngIf="selectedPeriod !== '90d'" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
          Período: {{ getPeriodLabel(selectedPeriod) }}
        </span>
        <span *ngFor="let uf of filters.uf" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
          UF: {{ uf }}
        </span>
        <span *ngFor="let status of filters.status" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
          Status: {{ getStatusLabel(status) }}
        </span>
        <span *ngIf="filters.modalidade?.length" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">
          Modalidade: {{ getModalidadeLabel(filters.modalidade?.[0] || '') }}
        </span>
        <span *ngIf="filters.orgao?.length" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200">
          Órgão: {{ filters.orgao?.[0] }}
        </span>
      </div>
    </div>
  </div>
</div>
